@model TimelineEvent
@{
    ViewData["Title"] = "Event Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<div class="container">
    <div class="col-sm-12">

        <div id="eventHeader">
            <div id="backArrow">

                <a class="arrowLink" onclick="goBack()" @*asp-action="Index" asp-route-timelineId="@ViewBag.TimelineId" *@><i class="fas fa-arrow-left"></i></a>
            </div>
            <div class="headerSection">
                <h2 class="mainHeader">@Model.Title </h2>
                <hr class="headerHR" />
                <h4><em>@Model.EventDateTime.ToString("dd MMMM yyyy")</em></h4>
            </div>


        </div>
    </div>
</div>




            <!-- Tab Section Start -->
<div class="bgColor">
    <div>
        <div class="tabLinksContainer">
            <div class="tab">
                <button class="tablinks uppercase active" onclick="openTab(event, 'overview')">Overview</button>
                <button class="tablinks uppercase" onclick="openTab(event, 'attachments')">Attachments</button>
                <button class="tablinks uppercase" onclick="openTab(event, 'gallery')">Gallery</button>
                <button class="tablinks uppercase" onclick="openTab(event, 'location')">Location</button>

            </div>
        </div>
    </div>





    <!-- Tabs/Headings -->
    <!-- Overview TAB -->
    <div id="overview" class="tabcontent" style="display: block;">
        <p>@Model.Description</p>
        
        <a href="#" class="btnRight">Edit</a>
        
    </div>

    <!-- Attachments TAB -->
    <div id="attachments" class="tabcontent">




                @if (Model.Attachments.Any())
                {
                    <table class="table">
                        <thead>
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.Title)
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Attachments)
                            {
                                <tr>
                                    <td>
                                        @if (item.IsImage)
                                        {
                                            <a asp-controller="Attachments" asp-action="Details" asp-route-eventId="@ViewBag.EventId" asp-route-attachmentId="@item.Id">@item.Title</a>
                                        }
                                        else
                                        {
                                            <a asp-controller="Attachments" asp-action="Download" asp-route-attachmentId="@item.Id">@item.Title</a>
                                        }
                                    </td>
                                    <td>
                                        @Html.ActionLink("Delete", "Delete", new { eventId = ViewBag.EventId, attachmentId = item.Id })
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
                else
                {
                    <p><em>There are no attachments to display.</em></p>
                }
        
                
        
                   <br />
                <h3>Upload</h3>

                <form method="post" enctype="multipart/form-data" asp-controller="Attachments" asp-action="Upload" asp-route-eventId="@ViewBag.EventId">
                    <div class="form-group formDragAndDrop">
                        @*<p>Upload one or more attachments:</p>*@
                        <input id="fileUpload" type="file" name="files" multiple class="form-control dragAndDrop" />
                    </div>

                    <input type="submit" value="Upload" class="btn btn-default" />
                </form>


    </div>


    <!-- Gallery TAB -->
    <div id="gallery" class="tabcontent">
        <p>Gallery is the capital of Japan.</p>
    </div>


    <!-- Location TAB -->
    <div id="location" class="tabcontent">
        <p>Location is the capital of Japan.</p>

        <div id="googleMap" style="height:400px; width: 100%;"></div>

        <script>
            function myMap() {
                var mapProp = {
                    center: new google.maps.LatLng(51.508742, -0.120850),
                    zoom: 5,
                };
                var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
            }
        </script>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfblapLmgaCE0GVpChYqSoGMJ8ik09IZA&callback=myMap"></script>
    </div>

</div>

    <div id="bottomEventNav">
        <div class="btnContainer">
            <button class="btnMain uppercase"><i class="leftArrow"></i>  Pre-event Name</button>
            <button class="btnMain uppercase">Delete</button>
            <button class="btnMain uppercase">Post-event Name  <i class="rightArrow"></i></button>
        </div>
    </div>




    @*<p>Location: @Model.Location</p>
        <p>DescriptiSon: @Model.Description</p>


        <p>
            <a asp-action="index" asp-controller="attachments" asp-route-eventId="@Model.Id" asp-route-timelineId="@ViewBag.TimelineId">Attachments</a> |
            <a asp-action="Delete" asp-route-id="@Model.Id">Delete</a> |
            <a asp-action="Index" asp-route-timelineId="@ViewBag.TimelineId">Back to timeline</a>
        </p>*@




    <script>
        function goBack() {
            window.history.back();
        }

        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>
